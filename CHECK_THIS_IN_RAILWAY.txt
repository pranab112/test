================================================================================
RAILWAY DEPLOYMENT - WHAT TO CHECK RIGHT NOW
================================================================================

Your code has been pushed with fixes. Railway should auto-redeploy.

================================================================================
STEP 1: VERIFY POSTGRESQL DATABASE IS ADDED
================================================================================

1. Open Railway dashboard: https://railway.app/dashboard
2. Click on your project
3. You should see TWO boxes:
   ✓ Your web service (casino-royal or similar)
   ✓ PostgreSQL database

If you DON'T see PostgreSQL:
   → Click "New" → "Database" → "Add PostgreSQL"
   → Wait 30 seconds
   → Continue to Step 2

================================================================================
STEP 2: CHECK ENVIRONMENT VARIABLES (CRITICAL!)
================================================================================

Click on your WEB SERVICE (not database) → Click "Variables" tab

MUST HAVE THESE VARIABLES:
----------------------------

✓ DATABASE_URL (auto-added when you connected PostgreSQL)

✓ SECRET_KEY
  Value: 8d440925489b66132ade62b809120bb0ffc98d02e3bab9dfcd850c3d67b9f088

✓ CREDENTIAL_ENCRYPTION_KEY
  Value: Z_iT0VGUhBuUOhR-NiPlLQC6vntAa6FxN31qTLbRwks=

✓ ENVIRONMENT
  Value: production

✓ ALGORITHM
  Value: HS256

✓ ACCESS_TOKEN_EXPIRE_MINUTES
  Value: 30

✓ CORS_ORIGINS
  Value: https://YOUR-RAILWAY-URL.up.railway.app
  (Get YOUR-RAILWAY-URL from Settings → Domains)

✓ BASE_URL
  Value: https://YOUR-RAILWAY-URL.up.railway.app
  (Same as CORS_ORIGINS)

OPTIONAL (but recommended):
----------------------------

✓ ENABLE_RATE_LIMITING
  Value: True

✓ LOG_LEVEL
  Value: INFO


HOW TO ADD MISSING VARIABLES:
1. Click "New Variable"
2. Name: (from list above)
3. Value: (from list above)
4. Click "Add"
5. Repeat for each missing variable

================================================================================
STEP 3: GET YOUR RAILWAY URL (if you don't have it yet)
================================================================================

1. Stay in your web service
2. Click "Settings" tab
3. Scroll to "Domains" section
4. If no domain exists:
   → Click "Generate Domain"
   → Copy the URL (example: casino-production-abc123.up.railway.app)
5. Use this URL for CORS_ORIGINS and BASE_URL in Step 2

================================================================================
STEP 4: TRIGGER REDEPLOY
================================================================================

After adding all variables:

Option A (Automatic):
   Railway will automatically redeploy when it detects the new commit

Option B (Manual):
   1. Click "Deployments" tab
   2. Click "Deploy" button (top right)

================================================================================
STEP 5: WATCH THE BUILD LOGS
================================================================================

1. Click "Deployments" tab
2. Click on the latest deployment (top one)
3. Watch for these SUCCESS messages:

   ✓ "Installing dependencies from requirements.txt"
   ✓ "Build completed successfully"
   ✓ "Casino Royal - Starting on Railway"
   ✓ "Required environment variables found"
   ✓ "Database migrations completed successfully"
   ✓ "Application startup complete"

LOOK FOR ERRORS:
   ✗ Red text = ERROR
   ✗ "ValidationError" = Missing environment variable
   ✗ "CORS_ORIGINS must be set" = Missing CORS_ORIGINS
   ✗ "could not connect" = Database not connected

================================================================================
STEP 6: VERIFY DEPLOYMENT SUCCESS
================================================================================

1. Copy your Railway URL from Step 3
2. Open in browser: https://YOUR-URL.up.railway.app/health
3. Should see: {"status":"healthy"}

If you see this, YOUR APP IS LIVE! ✓

If you get errors, see RAILWAY_CRASH_FIX.md for solutions

================================================================================
STEP 7: CREATE ADMIN ACCOUNT
================================================================================

1. In Railway dashboard, click your web service
2. Click three dots (⋮) menu → "Shell"
3. Wait for shell to open
4. Run: python create_admin.py
5. Follow prompts to create admin credentials
6. SAVE YOUR CREDENTIALS!

================================================================================
STEP 8: POPULATE GAMES
================================================================================

In the same Railway shell:
1. Run: python populate_games_postgres.py
2. Wait for success message

================================================================================
STEP 9: TEST YOUR APP
================================================================================

Open these URLs:

1. Health: https://YOUR-URL.up.railway.app/health
2. Client Dashboard: https://YOUR-URL.up.railway.app/client
3. Player Dashboard: https://YOUR-URL.up.railway.app/player
4. Admin Dashboard: https://YOUR-URL.up.railway.app/admin

================================================================================
MOST COMMON CRASH REASONS:
================================================================================

1. ✗ PostgreSQL not added
   → Fix: Add PostgreSQL database (Step 1)

2. ✗ Missing CORS_ORIGINS or BASE_URL
   → Fix: Add both variables with your Railway URL (Step 2)

3. ✗ Missing SECRET_KEY or CREDENTIAL_ENCRYPTION_KEY
   → Fix: Add them from the values in Step 2

4. ✗ ENVIRONMENT not set to "production"
   → Fix: Add ENVIRONMENT=production

5. ✗ DATABASE_URL not set
   → Fix: Link PostgreSQL database to your service

================================================================================
NEED THE ERROR LOGS?
================================================================================

1. Go to Deployments tab
2. Click failed deployment
3. Scroll to red error text
4. Copy the full error message
5. Check RAILWAY_CRASH_FIX.md for solution

OR

Send me the error and I'll help fix it!

================================================================================
YOUR DEPLOYMENT CHECKLIST:
================================================================================

[ ] PostgreSQL database added
[ ] All 9 environment variables set (from Step 2)
[ ] CORS_ORIGINS and BASE_URL use actual Railway URL
[ ] Deployment shows "Application startup complete"
[ ] /health endpoint returns {"status":"healthy"}
[ ] Admin account created
[ ] Games populated
[ ] Can login to dashboards

================================================================================

CURRENT STATUS: Code pushed with fixes (commit 7e49771)
NEXT STEP: Go to Railway dashboard and follow steps above

Railway Dashboard: https://railway.app/dashboard

================================================================================
