{
  "project": {
    "name": "Casino Royal SaaS Platform",
    "version": "1.0.0",
    "generated": "2025-11-20",
    "description": "Full-stack Casino Gaming Platform with SaaS capabilities",
    "technology_stack": {
      "backend": ["FastAPI (Python)", "Node.js (Express)"],
      "database": ["PostgreSQL (Production)", "SQLite (Development)"],
      "deployment": "Render.com"
    }
  },
  "entry_points": {
    "main_application": {
      "file": "app/main.py",
      "command": "uvicorn app.main:app --host 0.0.0.0 --port 8000",
      "dev_command": "uvicorn app.main:app --reload"
    },
    "database": {
      "migrate": "alembic upgrade head",
      "rollback": "alembic downgrade -1",
      "create_migration": "alembic revision --autogenerate -m 'message'"
    },
    "utilities": [
      {"name": "create_admin", "file": "create_admin.py", "purpose": "Create admin user"},
      {"name": "populate_games", "file": "populate_games.py", "purpose": "Load game catalog"},
      {"name": "migrate_credentials", "file": "scripts/migrate_credentials.py", "purpose": "Encrypt credentials"}
    ]
  },
  "core_modules": [
    {
      "name": "main",
      "file": "app/main.py",
      "exports": ["app"],
      "purpose": "Application entry point, CORS, middleware, router registration"
    },
    {
      "name": "models",
      "file": "app/models.py",
      "exports": ["User", "FriendRequest", "Message", "Game", "GameCredential", "Review", "Promotion", "Report", "PaymentMethod"],
      "purpose": "SQLAlchemy ORM models"
    },
    {
      "name": "database",
      "file": "app/database.py",
      "exports": ["engine", "SessionLocal", "Base", "get_db"],
      "purpose": "Database connection management"
    },
    {
      "name": "config",
      "file": "app/config.py",
      "exports": ["Settings", "settings"],
      "purpose": "Environment configuration"
    },
    {
      "name": "auth",
      "file": "app/auth.py",
      "exports": ["create_access_token", "get_current_user", "verify_password", "get_password_hash"],
      "purpose": "JWT authentication and password hashing"
    },
    {
      "name": "schemas",
      "file": "app/schemas.py",
      "exports": ["30+ Pydantic models"],
      "purpose": "API validation schemas"
    },
    {
      "name": "encryption",
      "file": "app/encryption.py",
      "exports": ["encrypt_credential", "decrypt_credential"],
      "purpose": "Fernet symmetric encryption for credentials"
    },
    {
      "name": "websocket",
      "file": "app/websocket.py",
      "exports": ["websocket_endpoint", "active_connections"],
      "purpose": "Real-time WebSocket communication"
    }
  ],
  "api_routers": [
    {"name": "auth", "file": "app/routers/auth.py", "endpoints": ["register", "login", "me", "refresh"]},
    {"name": "users", "file": "app/routers/users.py", "endpoints": ["search", "profile", "stats"]},
    {"name": "friends", "file": "app/routers/friends.py", "endpoints": ["request", "list", "accept", "reject", "remove"]},
    {"name": "chat", "file": "app/routers/chat.py", "endpoints": ["send", "conversations", "messages", "read"]},
    {"name": "games", "file": "app/routers/games.py", "endpoints": ["list", "details", "create", "update", "delete", "play"]},
    {"name": "game_credentials", "file": "app/routers/game_credentials.py", "endpoints": ["add", "list", "update", "delete"]},
    {"name": "reviews", "file": "app/routers/reviews.py", "endpoints": ["submit", "list", "update", "delete"]},
    {"name": "promotions", "file": "app/routers/promotions.py", "endpoints": ["create", "list", "claim", "my-claims", "update"]},
    {"name": "payment_methods", "file": "app/routers/payment_methods.py", "endpoints": ["add", "list", "update", "delete"]},
    {"name": "reports", "file": "app/routers/reports.py", "endpoints": ["submit", "list", "update", "my-reports"]},
    {"name": "profiles", "file": "app/routers/profiles.py", "endpoints": ["get", "update", "avatar"]},
    {"name": "online_status", "file": "app/routers/online_status.py", "endpoints": ["online", "offline", "check", "friends"]},
    {"name": "email_verification", "file": "app/routers/email_verification.py", "endpoints": ["send", "verify", "resend"]},
    {"name": "admin", "file": "app/routers/admin.py", "endpoints": ["dashboard", "users", "approve", "ban", "delete"]},
    {"name": "client", "file": "app/routers/client.py", "endpoints": ["dashboard", "players", "broadcast"]},
    {"name": "monitoring", "file": "app/routers/monitoring.py", "endpoints": ["health", "metrics", "logs"]}
  ],
  "database_tables": [
    {"name": "users", "purpose": "User accounts (clients, players, admins)"},
    {"name": "friends", "purpose": "Friend relationships (many-to-many)"},
    {"name": "friend_requests", "purpose": "Pending friend requests"},
    {"name": "conversations", "purpose": "Chat conversations"},
    {"name": "messages", "purpose": "Chat messages"},
    {"name": "games", "purpose": "Game catalog"},
    {"name": "game_credentials", "purpose": "Encrypted game accounts"},
    {"name": "reviews", "purpose": "Game reviews"},
    {"name": "promotions", "purpose": "Marketing promotions"},
    {"name": "promotion_claims", "purpose": "Claimed promotions"},
    {"name": "payment_methods", "purpose": "Payment processing"},
    {"name": "reports", "purpose": "User reports"},
    {"name": "online_status", "purpose": "Real-time presence tracking"}
  ],
  "key_dependencies": {
    "framework": {
      "fastapi": "0.120.3",
      "uvicorn": "0.38.0",
      "pydantic": "2.12.3"
    },
    "database": {
      "sqlalchemy": "2.0.44",
      "alembic": "1.17.1",
      "psycopg2-binary": "2.9.10"
    },
    "authentication": {
      "python-jose": "3.5.0",
      "bcrypt": "5.0.0",
      "passlib": "1.7.4"
    },
    "security": {
      "cryptography": "46.0.3",
      "slowapi": "0.1.9"
    },
    "storage": {
      "boto3": "1.35.93"
    },
    "testing": {
      "pytest": "8.3.4",
      "pytest-asyncio": "0.24.0",
      "httpx": "0.27.2"
    }
  },
  "configuration_files": [
    {"name": "alembic.ini", "purpose": "Alembic migration configuration"},
    {"name": "docker-compose.yml", "purpose": "Local PostgreSQL setup"},
    {"name": "render.yaml", "purpose": "Render.com deployment config"},
    {"name": "requirements.txt", "purpose": "Python dependencies"}
  ],
  "documentation_files": [
    {"name": "README.md", "lines": 396, "purpose": "Project overview and setup"},
    {"name": "RENDER_DEPLOYMENT_GUIDE.md", "purpose": "Deployment instructions"},
    {"name": "POSTGRESQL_MIGRATION.md", "purpose": "Database migration guide"},
    {"name": "AWS_S3_SETUP_GUIDE.md", "purpose": "S3 configuration"},
    {"name": "DEPLOYMENT_FIX.md", "purpose": "Troubleshooting"},
    {"name": "PROJECT_DOCUMENTATION.md", "purpose": "Architecture overview"},
    {"name": "CLAUDE.md", "purpose": "AI assistant context"}
  ],
  "frontend_dashboards": [
    {"route": "/", "file": "login.html", "purpose": "Universal login"},
    {"route": "/client", "file": "client-dashboard.html", "purpose": "Client management"},
    {"route": "/player", "file": "player-dashboard.html", "purpose": "Player gaming"},
    {"route": "/admin", "file": "admin-dashboard.html", "purpose": "Admin control panel"},
    {"route": "/register", "file": "player-register.html", "purpose": "Player registration"}
  ],
  "security_features": [
    "JWT bearer tokens",
    "bcrypt password hashing",
    "Fernet credential encryption",
    "Rate limiting (SlowAPI)",
    "CORS configuration",
    "SQL injection prevention",
    "Input validation (Pydantic)",
    "Security headers middleware",
    "SSL database connections"
  ],
  "deployment": {
    "platform": "Render.com",
    "service_type": "Web Service",
    "build_command": "pip install -r requirements.txt && alembic upgrade head",
    "start_command": "uvicorn app.main:app --host 0.0.0.0 --port $PORT",
    "environment_variables": [
      "DATABASE_URL",
      "SECRET_KEY",
      "ALGORITHM",
      "ACCESS_TOKEN_EXPIRE_MINUTES",
      "ENVIRONMENT",
      "CORS_ORIGINS",
      "CREDENTIAL_ENCRYPTION_KEY"
    ]
  },
  "quick_start": {
    "steps": [
      "Install dependencies: pip install -r requirements.txt",
      "Configure .env file with DATABASE_URL, SECRET_KEY",
      "Run migrations: alembic upgrade head",
      "Create admin: python create_admin.py",
      "Populate games: python populate_games.py",
      "Start server: uvicorn app.main:app --reload"
    ],
    "access_urls": {
      "api_docs": "http://localhost:8000/docs",
      "login": "http://localhost:8000/",
      "client": "http://localhost:8000/client",
      "player": "http://localhost:8000/player",
      "admin": "http://localhost:8000/admin"
    }
  },
  "test_commands": {
    "run_all": "pytest",
    "with_coverage": "pytest --cov=app --cov-report=html",
    "specific_file": "pytest tests/test_auth.py -v"
  },
  "common_issues": {
    "database_connection": "Check DATABASE_URL format (postgresql://user:pass@host:5432/db)",
    "migration_failure": "Check current version with 'alembic current', rollback with 'alembic downgrade -1'",
    "authentication": "Verify SECRET_KEY is set in environment",
    "cors_errors": "Set CORS_ORIGINS in production, use ENVIRONMENT=development locally"
  },
  "index_metadata": {
    "markdown_size_kb": 20.74,
    "json_size_kb": 10,
    "sections": 104,
    "token_savings_per_session": "94%",
    "generated_by": "/sc:index-repo",
    "last_updated": "2025-11-20"
  }
}
